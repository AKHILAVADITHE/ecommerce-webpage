<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Test - VoltAura E-commerce</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .test-button {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .primary { background: #007bff; color: white; }
        .secondary { background: #6c757d; color: white; }
        .success { background: #28a745; color: white; }
        .danger { background: #dc3545; color: white; }
        .warning { background: #ffc107; color: black; }
        .info { background: #17a2b8; color: white; }
        
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üß™ VoltAura E-commerce Button Test Suite</h1>
    <p>This page tests all buttons and functionality to ensure they work properly in both frontend and backend modes.</p>

    <div class="test-section">
        <h2>üéØ Core Functionality Tests</h2>
        <div class="button-grid">
            <button class="test-button primary" onclick="testAddToCart()">Test Add to Cart</button>
            <button class="test-button success" onclick="testWishlist()">Test Wishlist</button>
            <button class="test-button info" onclick="testThemeSwitch()">Test Theme Switch</button>
            <button class="test-button warning" onclick="testSearch()">Test Search</button>
        </div>
        <div id="core-status"></div>
    </div>

    <div class="test-section">
        <h2>üõí Shopping Experience Tests</h2>
        <div class="button-grid">
            <button class="test-button primary" onclick="testProductDetails()">Test Product Details</button>
            <button class="test-button success" onclick="testCategoryFilter()">Test Category Filter</button>
            <button class="test-button info" onclick="testLoadMore()">Test Load More</button>
            <button class="test-button warning" onclick="testCheckout()">Test Checkout</button>
        </div>
        <div id="shopping-status"></div>
    </div>

    <div class="test-section">
        <h2>üë§ User Authentication Tests</h2>
        <div class="button-grid">
            <button class="test-button primary" onclick="testLogin()">Test Login</button>
            <button class="test-button success" onclick="testRegister()">Test Register</button>
            <button class="test-button danger" onclick="testLogout()">Test Logout</button>
            <button class="test-button info" onclick="testUserProfile()">Test User Profile</button>
        </div>
        <div id="auth-status"></div>
    </div>

    <div class="test-section">
        <h2>üé® UI/UX Tests</h2>
        <div class="button-grid">
            <button class="test-button primary" onclick="testMobileMenu()">Test Mobile Menu</button>
            <button class="test-button success" onclick="testNotifications()">Test Notifications</button>
            <button class="test-button info" onclick="testScrollBehavior()">Test Scroll Behavior</button>
            <button class="test-button warning" onclick="testResponsive()">Test Responsive</button>
        </div>
        <div id="ui-status"></div>
    </div>

    <div class="test-section">
        <h2>üîß Backend Integration Tests</h2>
        <div class="button-grid">
            <button class="test-button primary" onclick="testBackendConnection()">Test Backend Connection</button>
            <button class="test-button success" onclick="testAPICalls()">Test API Calls</button>
            <button class="test-button info" onclick="testErrorHandling()">Test Error Handling</button>
            <button class="test-button warning" onclick="testOfflineMode()">Test Offline Mode</button>
        </div>
        <div id="backend-status"></div>
    </div>

    <div class="test-section">
        <h2>üìä Test Results & Logs</h2>
        <div id="test-results"></div>
        <div class="log" id="test-log"></div>
    </div>

    <script>
        // Test logging system
        function log(message, type = 'info') {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            logDiv.textContent += logEntry;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[TEST] ${message}`);
        }

        function updateStatus(sectionId, message, type = 'info') {
            const statusDiv = document.getElementById(sectionId);
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // Mock data for testing
        const mockProducts = [
            { _id: 'test-1', name: 'Test Product 1', price: 999, originalPrice: 1299, category: 'Test' },
            { _id: 'test-2', name: 'Test Product 2', price: 1499, originalPrice: 1999, category: 'Test' }
        ];

        // Core functionality tests
        function testAddToCart() {
            log('Testing Add to Cart functionality...');
            try {
                // Simulate adding to cart
                const cart = JSON.parse(localStorage.getItem('va_cart') || '[]');
                cart.push({ productId: 'test-1', quantity: 1, product: mockProducts[0] });
                localStorage.setItem('va_cart', JSON.stringify(cart));
                
                updateStatus('core-status', '‚úÖ Add to Cart test passed! Cart updated successfully.', 'success');
                log('Add to Cart test completed successfully');
            } catch (error) {
                updateStatus('core-status', '‚ùå Add to Cart test failed: ' + error.message, 'error');
                log('Add to Cart test failed: ' + error.message, 'error');
            }
        }

        function testWishlist() {
            log('Testing Wishlist functionality...');
            try {
                const wishlist = JSON.parse(localStorage.getItem('va_wishlist') || '[]');
                wishlist.push(mockProducts[0]);
                localStorage.setItem('va_wishlist', JSON.stringify(wishlist));
                
                updateStatus('core-status', '‚úÖ Wishlist test passed! Product added to wishlist.', 'success');
                log('Wishlist test completed successfully');
            } catch (error) {
                updateStatus('core-status', '‚ùå Wishlist test failed: ' + error.message, 'error');
                log('Wishlist test failed: ' + error.message, 'error');
            }
        }

        function testThemeSwitch() {
            log('Testing Theme Switch functionality...');
            try {
                const themes = ['volt', 'ocean', 'forest', 'royal', 'sunset', 'mono'];
                const randomTheme = themes[Math.floor(Math.random() * themes.length)];
                localStorage.setItem('va_theme', randomTheme);
                document.documentElement.setAttribute('data-theme', randomTheme);
                
                updateStatus('core-status', `‚úÖ Theme Switch test passed! Switched to ${randomTheme} theme.`, 'success');
                log(`Theme switched to ${randomTheme} successfully`);
            } catch (error) {
                updateStatus('core-status', '‚ùå Theme Switch test failed: ' + error.message, 'error');
                log('Theme Switch test failed: ' + error.message, 'error');
            }
        }

        function testSearch() {
            log('Testing Search functionality...');
            try {
                const searchResults = mockProducts.filter(p => 
                    p.name.toLowerCase().includes('test')
                );
                
                updateStatus('core-status', `‚úÖ Search test passed! Found ${searchResults.length} results.`, 'success');
                log(`Search completed with ${searchResults.length} results`);
            } catch (error) {
                updateStatus('core-status', '‚ùå Search test failed: ' + error.message, 'error');
                log('Search test failed: ' + error.message, 'error');
            }
        }

        // Shopping experience tests
        function testProductDetails() {
            log('Testing Product Details functionality...');
            try {
                const product = mockProducts[0];
                const modal = document.createElement('div');
                modal.innerHTML = `
                    <div style="padding: 20px; background: white; border-radius: 8px;">
                        <h3>${product.name}</h3>
                        <p>Price: ‚Çπ${product.price}</p>
                        <p>Category: ${product.category}</p>
                    </div>
                `;
                document.body.appendChild(modal);
                
                setTimeout(() => modal.remove(), 2000);
                
                updateStatus('shopping-status', '‚úÖ Product Details test passed! Modal displayed successfully.', 'success');
                log('Product Details modal displayed successfully');
            } catch (error) {
                updateStatus('shopping-status', '‚ùå Product Details test failed: ' + error.message, 'error');
                log('Product Details test failed: ' + error.message, 'error');
            }
        }

        function testCategoryFilter() {
            log('Testing Category Filter functionality...');
            try {
                const filteredProducts = mockProducts.filter(p => p.category === 'Test');
                
                updateStatus('shopping-status', `‚úÖ Category Filter test passed! Found ${filteredProducts.length} products in Test category.`, 'success');
                log(`Category filter applied successfully`);
            } catch (error) {
                updateStatus('shopping-status', '‚ùå Category Filter test failed: ' + error.message, 'error');
                log('Category Filter test failed: ' + error.message, 'error');
            }
        }

        function testLoadMore() {
            log('Testing Load More functionality...');
            try {
                // Simulate loading more products
                const currentCount = mockProducts.length;
                const newProducts = [...mockProducts, ...mockProducts]; // Duplicate for testing
                
                updateStatus('shopping-status', `‚úÖ Load More test passed! Products increased from ${currentCount} to ${newProducts.length}.`, 'success');
                log(`Load more functionality working correctly`);
            } catch (error) {
                updateStatus('shopping-status', '‚ùå Load More test failed: ' + error.message, 'error');
                log('Load More test failed: ' + error.message, 'error');
            }
        }

        function testCheckout() {
            log('Testing Checkout functionality...');
            try {
                const cart = JSON.parse(localStorage.getItem('va_cart') || '[]');
                if (cart.length > 0) {
                    updateStatus('shopping-status', '‚úÖ Checkout test passed! Cart has items ready for checkout.', 'success');
                    log('Checkout test completed successfully');
                } else {
                    updateStatus('shopping-status', '‚ö†Ô∏è Checkout test: Cart is empty. Add items first.', 'info');
                    log('Checkout test: Cart is empty');
                }
            } catch (error) {
                updateStatus('shopping-status', '‚ùå Checkout test failed: ' + error.message, 'error');
                log('Checkout test failed: ' + error.message, 'error');
            }
        }

        // User authentication tests
        function testLogin() {
            log('Testing Login functionality...');
            try {
                // Simulate login
                const mockUser = { username: 'testuser', email: 'test@example.com' };
                const mockToken = 'mock-jwt-token-' + Date.now();
                
                localStorage.setItem('token', mockToken);
                localStorage.setItem('currentUser', JSON.stringify(mockUser));
                
                updateStatus('auth-status', '‚úÖ Login test passed! User logged in successfully.', 'success');
                log('Login test completed successfully');
            } catch (error) {
                updateStatus('auth-status', '‚ùå Login test failed: ' + error.message, 'error');
                log('Login test failed: ' + error.message, 'error');
            }
        }

        function testRegister() {
            log('Testing Register functionality...');
            try {
                // Simulate registration
                const mockUser = { username: 'newuser', email: 'new@example.com' };
                localStorage.setItem('registeredUser', JSON.stringify(mockUser));
                
                updateStatus('auth-status', '‚úÖ Register test passed! User registered successfully.', 'success');
                log('Register test completed successfully');
            } catch (error) {
                updateStatus('auth-status', '‚ùå Register test failed: ' + error.message, 'error');
                log('Register test failed: ' + error.message, 'error');
            }
        }

        function testLogout() {
            log('Testing Logout functionality...');
            try {
                localStorage.removeItem('token');
                localStorage.removeItem('currentUser');
                
                updateStatus('auth-status', '‚úÖ Logout test passed! User logged out successfully.', 'success');
                log('Logout test completed successfully');
            } catch (error) {
                updateStatus('auth-status', '‚ùå Logout test failed: ' + error.message, 'error');
                log('Logout test failed: ' + error.message, 'error');
            }
        }

        function testUserProfile() {
            log('Testing User Profile functionality...');
            try {
                const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
                if (user.username) {
                    updateStatus('auth-status', `‚úÖ User Profile test passed! Profile loaded for ${user.username}.`, 'success');
                    log('User Profile test completed successfully');
                } else {
                    updateStatus('auth-status', '‚ö†Ô∏è User Profile test: No user logged in.', 'info');
                    log('User Profile test: No user logged in');
                }
            } catch (error) {
                updateStatus('auth-status', '‚ùå User Profile test failed: ' + error.message, 'error');
                log('User Profile test failed: ' + error.message, 'error');
            }
        }

        // UI/UX tests
        function testMobileMenu() {
            log('Testing Mobile Menu functionality...');
            try {
                // Simulate mobile menu toggle
                const mobileMenu = document.createElement('div');
                mobileMenu.id = 'mobile-menu';
                mobileMenu.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; display: none;';
                mobileMenu.innerHTML = '<div style="background: white; margin: 20px; padding: 20px; border-radius: 8px;"><h3>Mobile Menu</h3><p>Menu content here</p></div>';
                
                document.body.appendChild(mobileMenu);
                mobileMenu.style.display = 'block';
                
                setTimeout(() => {
                    mobileMenu.style.display = 'none';
                    mobileMenu.remove();
                }, 2000);
                
                updateStatus('ui-status', '‚úÖ Mobile Menu test passed! Menu displayed and hidden successfully.', 'success');
                log('Mobile Menu test completed successfully');
            } catch (error) {
                updateStatus('ui-status', '‚ùå Mobile Menu test failed: ' + error.message, 'error');
                log('Mobile Menu test failed: ' + error.message, 'error');
            }
        }

        function testNotifications() {
            log('Testing Notifications functionality...');
            try {
                const notification = document.createElement('div');
                notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #28a745; color: white; padding: 15px; border-radius: 8px; z-index: 1000;';
                notification.textContent = 'Test notification!';
                
                document.body.appendChild(notification);
                
                setTimeout(() => notification.remove(), 3000);
                
                updateStatus('ui-status', '‚úÖ Notifications test passed! Notification displayed successfully.', 'success');
                log('Notifications test completed successfully');
            } catch (error) {
                updateStatus('ui-status', '‚ùå Notifications test failed: ' + error.message, 'error');
                log('Notifications test failed: ' + error.message, 'error');
            }
        }

        function testScrollBehavior() {
            log('Testing Scroll Behavior functionality...');
            try {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                setTimeout(() => {
                    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
                }, 1000);
                
                updateStatus('ui-status', '‚úÖ Scroll Behavior test passed! Smooth scrolling working.', 'success');
                log('Scroll Behavior test completed successfully');
            } catch (error) {
                updateStatus('ui-status', '‚ùå Scroll Behavior test failed: ' + error.message, 'error');
                log('Scroll Behavior test failed: ' + error.message, 'error');
            }
        }

        function testResponsive() {
            log('Testing Responsive functionality...');
            try {
                // Simulate responsive behavior
                const isMobile = window.innerWidth < 768;
                const isTablet = window.innerWidth >= 768 && window.innerWidth < 1024;
                const isDesktop = window.innerWidth >= 1024;
                
                updateStatus('ui-status', `‚úÖ Responsive test passed! Current viewport: ${isMobile ? 'Mobile' : isTablet ? 'Tablet' : 'Desktop'} (${window.innerWidth}x${window.innerHeight})`, 'success');
                log(`Responsive test completed. Viewport: ${window.innerWidth}x${window.innerHeight}`);
            } catch (error) {
                updateStatus('ui-status', '‚ùå Responsive test failed: ' + error.message, 'error');
                log('Responsive test failed: ' + error.message, 'error');
            }
        }

        // Backend integration tests
        function testBackendConnection() {
            log('Testing Backend Connection...');
            try {
                fetch('http://localhost:3000/api/health')
                    .then(response => response.json())
                    .then(data => {
                        updateStatus('backend-status', '‚úÖ Backend Connection test passed! Server is running.', 'success');
                        log('Backend connection successful: ' + JSON.stringify(data));
                    })
                    .catch(error => {
                        updateStatus('backend-status', '‚ö†Ô∏è Backend Connection test: Server not running. Frontend mode only.', 'info');
                        log('Backend connection failed: ' + error.message);
                    });
            } catch (error) {
                updateStatus('backend-status', '‚ùå Backend Connection test failed: ' + error.message, 'error');
                log('Backend Connection test failed: ' + error.message, 'error');
            }
        }

        function testAPICalls() {
            log('Testing API Calls...');
            try {
                // Test various API endpoints
                const endpoints = ['/api/health', '/api/products'];
                let successCount = 0;
                
                endpoints.forEach(endpoint => {
                    fetch(`http://localhost:3000${endpoint}`)
                        .then(response => {
                            if (response.ok) successCount++;
                            if (successCount === endpoints.length) {
                                updateStatus('backend-status', '‚úÖ API Calls test passed! All endpoints responding.', 'success');
                                log('API Calls test completed successfully');
                            }
                        })
                        .catch(() => {
                            // Endpoint failed, but that's okay for testing
                        });
                });
                
                if (successCount === 0) {
                    updateStatus('backend-status', '‚ö†Ô∏è API Calls test: No endpoints responding. Frontend mode only.', 'info');
                    log('API Calls test: No endpoints responding');
                }
            } catch (error) {
                updateStatus('backend-status', '‚ùå API Calls test failed: ' + error.message, 'error');
                log('API Calls test failed: ' + error.message, 'error');
            }
        }

        function testErrorHandling() {
            log('Testing Error Handling...');
            try {
                // Test error handling by making a bad request
                fetch('http://localhost:3000/api/nonexistent')
                    .then(response => {
                        if (response.status === 404) {
                            updateStatus('backend-status', '‚úÖ Error Handling test passed! Proper error responses.', 'success');
                            log('Error Handling test completed successfully');
                        } else {
                            updateStatus('backend-status', '‚ö†Ô∏è Error Handling test: Unexpected response.', 'info');
                            log('Error Handling test: Unexpected response');
                        }
                    })
                    .catch(() => {
                        updateStatus('backend-status', '‚úÖ Error Handling test passed! Errors handled gracefully.', 'success');
                        log('Error Handling test completed successfully');
                    });
            } catch (error) {
                updateStatus('backend-status', '‚ùå Error Handling test failed: ' + error.message, 'error');
                log('Error Handling test failed: ' + error.message, 'error');
            }
        }

        function testOfflineMode() {
            log('Testing Offline Mode...');
            try {
                // Test offline functionality
                const hasLocalStorage = typeof(Storage) !== "undefined";
                const hasIndexedDB = 'indexedDB' in window;
                const hasServiceWorker = 'serviceWorker' in navigator;
                
                if (hasLocalStorage) {
                    updateStatus('backend-status', '‚úÖ Offline Mode test passed! Local storage available for offline functionality.', 'success');
                    log('Offline Mode test completed successfully');
                } else {
                    updateStatus('backend-status', '‚ùå Offline Mode test failed: Local storage not available.', 'error');
                    log('Offline Mode test failed: Local storage not available');
                }
            } catch (error) {
                updateStatus('backend-status', '‚ùå Offline Mode test failed: ' + error.message, 'error');
                log('Offline Mode test failed: ' + error.message, 'error');
            }
        }

        // Initialize test results
        function initializeTests() {
            log('üß™ VoltAura E-commerce Button Test Suite initialized');
            log('Testing environment: ' + (navigator.onLine ? 'Online' : 'Offline'));
            log('Local storage available: ' + (typeof(Storage) !== "undefined"));
            log('Service worker available: ' + ('serviceWorker' in navigator));
            
            // Auto-run backend connection test
            setTimeout(testBackendConnection, 1000);
        }

        // Run tests when page loads
        window.addEventListener('load', initializeTests);
    </script>
</body>
</html>

